"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createContainer = void 0;
const _providers_1 = require("../shared/providers");
const user_1 = require("../modules/user");
const inventory_1 = require("../modules/inventory");
const token_1 = require("../modules/token");
const challenge_1 = require("../modules/challenge");
const chat_1 = require("../modules/chat");
const level_1 = require("../modules/level");
const report_1 = require("../modules/report");
const notification_1 = require("../modules/notification");
const market_1 = require("../modules/market");
const membership_1 = require("../modules/membership");
const purchase_1 = require("../modules/purchase");
const analytics_1 = require("../modules/analytics");
const razorpay_config_1 = require("../config/razorpay.config");
const env_1 = require("../config/env");
const createContainer = () => {
    console.log("DI STARTED");
    const container = {};
    container.tokenProv = new _providers_1.TokenProvider();
    container.hashProv = new _providers_1.HashProvider();
    container.emailProv = new _providers_1.EmailProvider();
    container.imageUploader = new _providers_1.ImageUploader();
    container.userRepo = new user_1.UserRepository();
    container.pendingUserRepo = new user_1.PendingUserRepository();
    container.tokenRepo = new token_1.TokenRepository();
    container.avatarRepo = new inventory_1.AvatarRepository();
    container.bannerRepo = new inventory_1.BannerRepository();
    container.badgeRepo = new inventory_1.BadgeRepository();
    container.challengeRepo = new challenge_1.ChallengeRepository();
    container.submissionRepo = new challenge_1.SubmissionRepository();
    container.solutionRepo = new challenge_1.SolutionRepository();
    container.conversationRepo = new chat_1.ConversationRepository();
    container.messageRepo = new chat_1.MessageRepository();
    container.groupRepo = new chat_1.GroupRepository();
    container.levelRepo = new level_1.LevelRepository();
    container.reportRepo = new report_1.ReportRepository();
    container.marketRepo = new market_1.MarketRepository();
    container.notificationRepo = new notification_1.NotificationRepository();
    container.membershipRepo = new membership_1.MembershipRepository();
    container.purchaseRepo = new purchase_1.PurchaseRepository();
    container.analyticsRepo = new analytics_1.AnalyticsRepository();
    container.leaderboardRepo = new analytics_1.LeaderboardRepository();
    container.tokenSvc = new token_1.TokenService(container.tokenRepo, container.tokenProv);
    container.authSrv = new user_1.AuthService(container.userRepo, container.pendingUserRepo, container.tokenProv, container.emailProv, container.hashProv, container.tokenSvc);
    container.userCommandSvc = new user_1.UserCommandService(container.userRepo, container.hashProv);
    container.userQuerySvc = new user_1.UserQueryService(container.userRepo, container.submissionRepo);
    container.marketSvc = new market_1.MarketService(container.marketRepo, container.userRepo);
    container.userEngagementSvc = new user_1.UserEngagementService(container.userRepo, container.marketSvc);
    container.avatarInventorySvc = new inventory_1.InventoryService(container.avatarRepo, container.imageUploader);
    container.bannerInventorySvc = new inventory_1.InventoryService(container.bannerRepo, container.imageUploader);
    container.badgeInventorySvc = new inventory_1.InventoryService(container.badgeRepo, container.imageUploader);
    container.challengeCommandSvc = new challenge_1.ChallengeCommandService(container.challengeRepo);
    container.challengeQuerySvc = new challenge_1.ChallengeQueryService(container.challengeRepo, container.submissionRepo);
    container.challengeExecutionSvc = new challenge_1.ChallengeExecutionService(container.challengeRepo, container.submissionRepo);
    container.challengeStatsSvc = new challenge_1.ChallengeStatsService(container.challengeRepo, container.submissionRepo, container.userRepo, container.levelRepo);
    container.submissionSvc = new challenge_1.SubmissionService(container.submissionRepo, container.userRepo);
    container.solutionSvc = new challenge_1.SolutionService(container.solutionRepo);
    container.conversationCommandSvc = new chat_1.ConversationCommandService(container.conversationRepo);
    container.conversationQuerySvc = new chat_1.ConversationQueryService(container.conversationRepo, container.groupRepo, container.userRepo);
    container.conversationTypingSvc = new chat_1.ConversationTypingService(container.conversationRepo);
    container.messageCommandSvc = new chat_1.MessageCommandService(container.messageRepo);
    container.messageQuerySvc = new chat_1.MessageQueryService(container.messageRepo);
    container.messageEngagementSvc = new chat_1.MessageEngagementService(container.messageRepo);
    container.groupCommandSvc = new chat_1.GroupCommandService(container.groupRepo, container.conversationRepo);
    container.groupQuerySvc = new chat_1.GroupQueryService(container.groupRepo);
    container.groupMemberSvc = new chat_1.GroupMemberService(container.groupRepo, container.conversationRepo);
    container.levelSvc = new level_1.LevelService(container.levelRepo, container.userRepo);
    container.reportSvc = new report_1.ReportService(container.reportRepo);
    container.notificationSvc = new notification_1.NotificationService(container.notificationRepo);
    container.membershipSvc = new membership_1.MembershipService(container.membershipRepo);
    container.purchaseCommandSvc = new purchase_1.PurchaseCommandService(container.purchaseRepo, container.membershipRepo, container.userRepo);
    container.purchaseQuerySvc = new purchase_1.PurchaseQueryService(container.purchaseRepo);
    container.purchasePaymentSvc = new purchase_1.PurchasePaymentService(razorpay_config_1.razorpay, env_1.env.RAZORPAY_KEY_SECRET);
    container.analyticsSvc = new analytics_1.AnalyticsService(container.analyticsRepo, container.leaderboardRepo);
    container.authCtrl = new user_1.AuthController(container.authSrv);
    container.userCtrl = new user_1.UserController(container.userQuerySvc, container.userCommandSvc, container.userEngagementSvc, container.tokenSvc);
    container.avatarCtrl = new inventory_1.InventoryController(container.avatarInventorySvc);
    container.bannerCtrl = new inventory_1.InventoryController(container.bannerInventorySvc);
    container.badgeCtrl = new inventory_1.InventoryController(container.badgeInventorySvc);
    container.challengeCtrl = new challenge_1.ChallengeController(container.challengeQuerySvc, container.challengeCommandSvc, container.challengeExecutionSvc, container.challengeStatsSvc);
    container.submissionCtrl = new challenge_1.SubmissionController(container.submissionSvc);
    container.solutionCtrl = new challenge_1.SolutionController(container.solutionSvc);
    container.conversationCtrl = new chat_1.ConversationController(container.conversationCommandSvc, container.conversationQuerySvc, container.conversationTypingSvc);
    container.messageCtrl = new chat_1.MessageController(container.messageQuerySvc, container.messageCommandSvc, container.messageEngagementSvc);
    container.groupCtrl = new chat_1.GroupController(container.groupQuerySvc, container.groupCommandSvc, container.groupMemberSvc);
    container.levelCtrl = new level_1.LevelController(container.levelSvc);
    container.reportCtrl = new report_1.ReportController(container.reportSvc);
    container.marketCtrl = new market_1.MarketController(container.marketSvc);
    container.notificationCtrl = new notification_1.NotificationController(container.notificationSvc);
    container.membershipCtrl = new membership_1.MembershipController(container.membershipSvc);
    container.purchaseCtrl = new purchase_1.PurchaseController(container.purchasePaymentSvc, container.purchaseCommandSvc, container.purchaseQuerySvc);
    container.analyticsCtrl = new analytics_1.AnalyticsController(container.analyticsSvc);
    console.log("DI ENDED");
    return container;
};
exports.createContainer = createContainer;
